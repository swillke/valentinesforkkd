<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine?</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 0; min-height: 100vh; display: grid; place-items: center; background: #fff5f7; }
    .card { width: min(720px, 92vw); background: white; border-radius: 20px; padding: 22px; box-shadow: 0 10px 30px rgba(0,0,0,.08); text-align: center; }
    h1 { margin: 12px 0 6px; font-size: clamp(26px, 3.6vw, 38px); }
    p { margin: 0 0 16px; color: #444; font-size: 16px; }
    img { width: 100%; max-height: 360px; object-fit: cover; border-radius: 16px; }
    .buttons { margin-top: 18px; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
    a.btn { text-decoration: none; padding: 12px 18px; border-radius: 999px; font-weight: 700; border: 2px solid transparent; }
    a.yes { background: #ff2d55; color: white; }
    a.no  { background: #f2f2f7; color: #111; border-color: #ddd; }
    a.btn:active { transform: translateY(1px); }
  </style>
</head>
<body>
  <div class="card">
    <img id="pageImage" src="" alt="" />
    <h1 id="headline"></h1>
    <p id="subtext"></p>

    <div class="buttons" id="buttons">
      <a class="btn yes" id="yesBtn" href="#">Yes</a>
      <a class="btn no"  id="noBtn"  href="#">No</a>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const n = Math.max(1, parseInt(params.get("n") || "1", 10) || 1);

      const headline = document.getElementById("headline");
      const subtext  = document.getElementById("subtext");
      const pageImage = document.getElementById("pageImage");
      const yesBtn = document.getElementById("yesBtn");
      const noBtn  = document.getElementById("noBtn");

      // Choose how long the "fun" lasts before YES finally ends it
      const FINAL_STEP = 5; // 

      const noHeadlines = [
        "the answer we were looking for was yes, try again",
        "look its just the button on the left",
        "alright time to clean up the shenaningans",
        "are we gonna do this the easy way or the hard way",
        "how dare you. try again",
        "maybe mind control will work",
      ];

      const noSubtexts = [
        "it fine it's kinda confusing",
        "you're really pissing off your favorite marvel hero",
        "come on kylie wtf",
        "do you enjoy being difficult?",
        "memo to me, memo to me: remember this injustice",
        "...kylie...you're getting sleepy...you really feel like pressing yes",
      ];

      const noGifs = [
        "images/ron_unsure.gif",
        "images/eye-roll-robert-downey-jr.gif",
        "images/dead_broad_off_the_table.gif",
        "images/frustrated_dumbledore.gif",
        "images/angry_hades.gif",
        "images/yoda_mind_control.gif",
      ];


      // If we're at/after FINAL_STEP: YES goes to the ending page, NO keeps looping
      if (n >= FINAL_STEP) {
        // pick something fun for the "final decision" screen (use last gif or whatever)
        pageImage.src = noGifs[Math.min(n - 1, noGifs.length - 1)];
        pageImage.alt = "Final decision";

        const idx = Math.min(n - 1, noHeadlines.length - 1);
        headline.textContent = noHeadlines[idx] || "Alright. Final answer.";
        subtext.textContent  = noSubtexts[idx]  || "Choose wisely ðŸ˜Œ";

        yesBtn.href = "final.html";
        noBtn.href  = `choice.html?n=${n + 1}`;
        return;
      }

      // Otherwise: both YES and NO keep the loop going (so she can mash either)
      const gifIndex = Math.min(n - 1, noGifs.length - 1);
      pageImage.src = noGifs[gifIndex];
      pageImage.alt = "Not yet";

      const textIndex = Math.min(n - 1, noHeadlines.length - 1);
      headline.textContent = noHeadlines[textIndex] || "";
      subtext.textContent  = noSubtexts[textIndex]  || "";

      yesBtn.href = `choice.html?n=${n + 1}`;
      noBtn.href  = `choice.html?n=${n + 1}`;
    });
  </script>
</body>
</html>