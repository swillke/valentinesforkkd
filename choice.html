<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine?</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 0; min-height: 100vh; display: grid; place-items: center; background: #fff5f7; }
    .card { width: min(720px, 92vw); background: white; border-radius: 20px; padding: 22px; box-shadow: 0 10px 30px rgba(0,0,0,.08); text-align: center; }
    h1 { margin: 12px 0 6px; font-size: clamp(26px, 3.6vw, 38px); }
    p { margin: 0 0 16px; color: #444; font-size: 16px; }
    img { width: 100%; max-height: 360px; object-fit: cover; border-radius: 16px; }
    .buttons { margin-top: 18px; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
    a.btn { text-decoration: none; padding: 12px 18px; border-radius: 999px; font-weight: 700; border: 2px solid transparent; }
    a.yes { background: #ff2d55; color: white; }
    a.no  { background: #f2f2f7; color: #111; border-color: #ddd; }
  </style>
</head>
<body>
  <div class="card">
    <img id="pageImage" src="" alt="" />

    <h1 id="headline"></h1>
    <p id="subtext"></p>

    <div class="buttons" id="buttons">
      <a class="btn yes" id="yesBtn" href="choice.html?answer=yes">Yes</a>
      <a class="btn no"  id="noBtn"  href="choice.html?answer=no&n=1">No</a>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const answer = (params.get("answer") || "no").toLowerCase();
      const n = Math.max(1, parseInt(params.get("n") || "1", 10) || 1);

      const headline = document.getElementById("headline");
      const subtext  = document.getElementById("subtext");
      const pageImage = document.getElementById("pageImage");
      const buttons = document.getElementById("buttons");
      const noBtn = document.getElementById("noBtn");

      // HARD FAIL with a visible message if IDs aren’t found (this is your “it’s definitely broken” indicator)
      if (!headline || !subtext || !pageImage || !buttons || !noBtn) {
        document.body.innerHTML = `
          <div style="font-family:system-ui; padding:20px;">
            <h2>Page markup mismatch</h2>
            <p>One of the required elements is missing (headline/subtext/pageImage/buttons/noBtn).</p>
            <p>That usually means GitHub Pages is serving an older cached <code>choice.html</code> or the IDs don’t match.</p>
          </div>`;
        return;
      }

      const noHeadlines = [
        "I think you hit the wrong button...",
        "alright time to clean up the shenaningans",
        "how dare you. try again",
        "maybe mind control will work",
      ];

      const noSubtexts = [
        "it fine it's kinda confusing",
        "come on",
        "memo to me, memo to me: remember this injustice",
        "you really feel like pressing yes",
      ];

      const noGifs = [
        "images/ron_unsure.gif",
        "images/dead_broad_off_the_table.gif",
        "images/angry_hades.gif",
        "images/yoda_mind_control.gif",
      ];

      if (answer === "yes") {
        pageImage.src = "images/quest_for_camelot_final_yes.gif";
        pageImage.alt = "Yes gif";

        headline.textContent = "finally";
        subtext.textContent = "jesus christ dude";

        buttons.style.display = "none";
        return;
      }

      // NO path
      const gifIndex = Math.min(n - 1, noGifs.length - 1);
      pageImage.src = noGifs[gifIndex];
      pageImage.alt = "No gif";

      const textIndex = Math.min(n - 1, noHeadlines.length - 1);
      headline.textContent = noHeadlines[textIndex];
      subtext.textContent = noSubtexts[textIndex];

      // CRITICAL: increment NO click counter
      noBtn.href = `choice.html?answer=no&n=${n + 1}`;
    });
  </script>
</body>
</html>
